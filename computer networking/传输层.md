---
typora-copy-images-to: ./计算机网络1.resources
---

# 传输层

[TOC]

<img src="计算机网络1.resources/image-20200313161703468.png" alt="image-20200313161703468" style="zoom:50%;" />

## 两个协议

<img src="计算机网络1.resources/image-20200313161733445.png" alt="image-20200313161733445" style="zoom:50%;" />

TCP协议：需要将传输的文件分段再传输，CS之间要建立会话，以及流量控制，进行可靠传输。端口80 

UDP协议：一个数据包就可以传输，无需分段，**无需建立会话**，不需要流量控制，进行不可靠传输。

QQ聊天采用UDP协议，但是QQ传文件是TCP

### 常见的协议端口

<img src="计算机网络1.resources/image-20200313161752006.png" alt="image-20200313161752006" style="zoom:50%;" />

HTTP：TCP 80

HTTPS：TCP 443

远程桌面协议 RDP： TCP 3389

FTP：TCP 21 

共享文件夹：TCP  445

发邮件协议 SMTP：TCP 25

收邮件协议 POP3：TCP 110

Telnet：TCP 23

SQL：TCP 1433

DNS：UDP 53

TCP：6    UDP：17    IGMP：1

### 服务和应用层之间的关系

一个Web服务器，上面部署若干服务：Web、FTP、SMTP、POP3，通过不同的端口对数据进行侦听，网卡会对请求的数据包进行端口号筛选过滤。其中当有些有漏洞服务开启，攻击者会通过该服务的端口号进行服务器攻击。

<img src="计算机网络1.resources/image-20200313162738855.png" alt="image-20200313162738855" style="zoom:50%;" />

1. 服务使用TCP或UDP端口侦听客户端口的请求

2. 客户端使用IP地址定位服务器，使用目标端口定位服务

3. 可以在服务器网卡上只开放必要端口，实现服务器的网络安全

## 传输层的功能

传输层为**应用程序**提供了逻辑通信，而IP协议的功能是提供主机到主机之间的逻辑通信

<img src="计算机网络1.resources/image-20200313170108204.png" alt="image-20200313170108204" style="zoom:50%;" />

<img src="计算机网络1.resources/image-20200313170716804.png" alt="image-20200313170716804" style="zoom:50%;" />

### 端口的范围

0-65535

<img src="计算机网络1.resources/image-20200313172054156.png" alt="image-20200313172054156" style="zoom:50%;" />

## UDP

不连接、不分段、不会话、不可靠、不拥塞控制

<img src="计算机网络1.resources/image-20200313172419082.png" alt="image-20200313172419082" style="zoom:50%;" />

<img src="计算机网络1.resources/image-20200313172735118.png" alt="image-20200313172735118" style="zoom:50%;" />

## TCP

可靠的、连接的、点对点通信、全双工（应答机制保证连接不中断）、

<img src="计算机网络1.resources/image-20200313173745177.png" alt="image-20200313173745177" style="zoom:50%;" />

<img src="计算机网络1.resources/image-20200313184017159.png" alt="image-20200313184017159" style="zoom:50%;" />

<img src="计算机网络1.resources/image-20200313184107208.png" alt="image-20200313184107208" style="zoom:50%;" />



TCP是如何实现可靠传输的



TCP是如何实现流量控制的



TCP协议如何避免网络堵塞